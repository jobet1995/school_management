{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/upcoming_events.css' %}">

<div class="upcoming-events" 
     data-plugin-id="{{ instance.id }}"
     data-auto-rotate="{{ instance.auto_rotate|yesno:'true,false' }}"
     data-rotation-interval="{{ instance.rotation_interval }}"
     data-show-category-filter="{{ instance.show_category_filter|yesno:'true,false' }}"
     data-show-date-filter="{{ instance.show_date_filter|yesno:'true,false' }}">
    <h2>{{ instance.title }}</h2>
    
    <!-- Filter controls -->
    <div class="events-filters">
        {% if instance.show_category_filter %}
            <select class="filter-category" aria-label="Filter by category">
                <option value="">All Categories</option>
                <option value="academic">Academic</option>
                <option value="sports">Sports</option>
                <option value="cultural">Cultural</option>
                <option value="social">Social</option>
                <option value="administrative">Administrative</option>
            </select>
        {% endif %}
        
        {% if instance.show_date_filter %}
            <select class="filter-date" aria-label="Filter by date">
                <option value="">All Dates</option>
                <option value="today">Today</option>
                <option value="this_week">This Week</option>
                <option value="this_month">This Month</option>
            </select>
        {% endif %}
        
        <button class="filter-reset" aria-label="Reset filters">Reset</button>
    </div>
    
    <div class="events-container {% if instance.enable_carousel %}carousel-enabled{% endif %}">
        {% if instance.enable_carousel %}
            <button class="carousel-nav carousel-prev" aria-label="Previous event">&#8249;</button>
        {% endif %}
        <div class="events-list {% if instance.enable_carousel %}carousel{% endif %}">
            <!-- Events will be loaded via AJAX -->
            <div class="loading">Loading events...</div>
        </div>
        {% if instance.enable_carousel %}
            <button class="carousel-nav carousel-next" aria-label="Next event">&#8250;</button>
        {% endif %}
    </div>
</div>