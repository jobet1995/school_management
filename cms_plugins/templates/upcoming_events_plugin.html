{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/upcoming_events.css' %}">

<div class="upcoming-events" 
     data-plugin-id="{{ instance.id }}"
     data-auto-rotate="{{ auto_rotate|yesno:'true,false' }}"
     data-rotation-interval="{{ rotation_interval }}">
    <h2>{{ instance.title }}</h2>
    <div class="events-container {% if enable_carousel %}carousel-enabled{% endif %}">
        {% if enable_carousel %}
            <button class="carousel-nav carousel-prev" aria-label="Previous event">&#8249;</button>
        {% endif %}
        <div class="events-list {% if enable_carousel %}carousel{% endif %}">
            {% for event in events %}
                <div class="event-item" data-event-id="{{ event.id }}" data-event-start="{{ event.start_date|date:'c' }}">
                    <h3>{{ event.title }}</h3>
                    <p class="event-dates">
                        <span class="start-date">{{ event.start_date|date:"F d, Y \a\t g:i A" }}</span>
                        {% if event.end_date %}
                            - <span class="end-date">{{ event.end_date|date:"F d, Y \a\t g:i A" }}</span>
                        {% endif %}
                    </p>
                    {% if event.location %}
                        <p class="event-location">{{ event.location }}</p>
                    {% endif %}
                    <p class="event-description">{{ event.description|truncatewords:30 }}</p>
                    <div class="countdown-timer" data-event-id="{{ event.id }}">
                        <span class="countdown-days">00</span>d 
                        <span class="countdown-hours">00</span>h 
                        <span class="countdown-minutes">00</span>m 
                        <span class="countdown-seconds">00</span>s
                    </div>
                </div>
            {% empty %}
                <p>No events available.</p>
            {% endfor %}
        </div>
        {% if enable_carousel %}
            <button class="carousel-nav carousel-next" aria-label="Next event">&#8250;</button>
        {% endif %}
    </div>
</div>